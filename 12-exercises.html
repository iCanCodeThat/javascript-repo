<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>12 Exercises</title>
  </head>
  <body>

    <!------------------- Exercise C, D------------------------>
    <button class="js-start js-event-start">Start</button>

    <!------------------- Exercise E, F------------------------>

    <button class="js-button" onclick="
      displayMessage();
    ">Add to cart</button>

    <p class="js-message js-event-message"></p>


    

    <script>
      /************************* Exercise 12 a,b *********************/
      const add = function() {
        console.log(2 + 3);
      };

      add();
      add();

      function runTwice(fun) {
        fun();
        fun();
      }

      runTwice(function() {
        console.log('12b');
      });
      
      runTwice(add);

      //  Exercise C, D

      //  Grouping the JavaScript code into a function
      //  is optional, but it is a bit cleaner.
      function updateButton() {
        
        /*
        //Exerecise C
          const button = document.querySelector('.js-start');

          setTimeout(() => {
            button.innerHTML = 'Finished!';
          }, 1000);
        */
        
        
        //  Exercise D
        const button = document.querySelector('.js-start');
        
        button.innerHTML = 'Loading...';
        setTimeout(() => {
          button.innerHTML = 'Finished!';
        }, 1000);
     
      }
      /*
      //  Exercise C Event Listener
      document.querySelector('.js-event-start')
        .addEventListener('click',()=>{
          updateButton();
        })
      */

      //  Exercise D Event Listener

      document.querySelector('.js-event-start')
        .addEventListener('click',()=>{
          updateButton();
        })




      //  Exercise E, F
      
      function displayMessage() {
        /*
        //  Exercise E code
          const messageElement = document.querySelector('.js-message');
          messageElement.innerHTML = 'Added';

          setTimeout(() => {
            messageElement.innerHTML = '';
          }, 2000);
       */
     
        //  Exercise F
        let timeoutId;
        const messageElement = document.querySelector('.js-message');
        messageElement.innerHTML = 'Added';

        // First, cancel the previous timeout so that
        // it doesn't remove the message too quickly.
        clearTimeout(timeoutId);
        timeoutId = setTimeout(() => {
          messageElement.innerHTML = '';
        }, 2000);
        

      }

      /*
      //  Exercise E Event Listener
      document.querySelector('.js-event-message')
        .addEventListener('click', () =>{
          displayMessage();
        });
      */
      //  Exercise F Event Listener
      document.querySelector('.js-event-message')
        .addEventListener('click', () =>{
          displayMessage();
        });

      //  Exercise G

      setInterval(() => {
              if (document.title === 'App') {
                document.title = '(2) New messages';
              } else {
                document.title = 'App';
              }
            }, 1000);
      
    

    </script>

  </body>
</html>
